const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Albums-DtzzvsB6.js","assets/vendor-vue-CWsiai-x.js","assets/vendor-vue-CIGW-MKW.css","assets/Albums-B4KiBtg-.css","assets/Timeline-DNXrAX4H.js","assets/Timeline-BoLt2dbq.css","assets/PhotoDetail-Bs2CbgSX.js","assets/PhotoDetail-f2_BEwM1.css"])))=>i.map(i=>d[i]);
import{r as ee,a as g,w as G,c as h,b as t,n as E,d as te,e as x,f as C,u as w,g as K,h as N,j as W,v as oe,o as v,k as Y,T as J,m as I,K as se,p as ne,q as V,t as k,s as j,x as A,y as ae,z as re,A as le,B as ie,C as ce,F,D as M,E as de,G as ue,H as me,I as ve,J as he,L as fe}from"./vendor-vue-CWsiai-x.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const e of l.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&i(e)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}})();const pe="modulepreload",ye=function(o){return"/"+o},Q={},O=function(r,a,i){let s=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),c=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));s=Promise.allSettled(a.map(u=>{if(u=ye(u),u in Q)return;Q[u]=!0;const m=u.endsWith(".css"),L=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${L}`))return;const p=document.createElement("link");if(p.rel=m?"stylesheet":pe,m||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),m)return new Promise(($,D)=>{p.addEventListener("load",$),p.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${u}`)))})}))}function l(e){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=e,window.dispatchEvent(c),!c.defaultPrevented)throw e}return s.then(e=>{for(const c of e||[])c.status==="rejected"&&l(c.reason);return r().catch(l)})},b=ee({searchQuery:"",photos:[],loading:!1,async initData(){if(!(this.photos.length>0)){this.loading=!0;try{const o=await O(()=>import("./photos-3R7ioI88.js"),[]);this.photos=o.default||o}catch(o){console.error("æ•°æ®åŠ è½½å¤±è´¥",o)}finally{this.loading=!1}}}}),R=(o,r)=>{const a=o.__vccOpts||o;for(const[i,s]of r)a[i]=s;return a},ge={class:"layout-container"},_e={class:"sidebar-inner"},we={class:"nav-menu"},be={class:"search-section"},ke={class:"search-input-wrapper"},Le={class:"main-content"},Ee={__name:"App",setup(o){const r=K(),a=g(!1),i=()=>{a.value=!a.value},s=()=>{a.value=!1};return G(()=>r.path,()=>{s()}),(l,e)=>{const c=N("router-link"),u=N("router-view");return v(),h("div",ge,[t("header",{class:"mobile-header"},[t("button",{class:"menu-btn",onClick:i},[...e[1]||(e[1]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),t("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),t("line",{x1:"3",y1:"18",x2:"21",y2:"18"})],-1)])]),e[2]||(e[2]=t("span",{class:"mobile-title"},"YuCheng",-1)),e[3]||(e[3]=t("div",{style:{width:"24px"}},null,-1))]),t("div",{class:E(["drawer-overlay",{show:a.value}]),onClick:s},null,2),t("aside",{class:E(["sidebar",{open:a.value}])},[t("div",_e,[t("button",{class:"close-btn-mobile",onClick:s},"Ã—"),e[8]||(e[8]=te('<div class="profile-section" data-v-5166eb9e><div class="avatar-ring" data-v-5166eb9e><img src="https://api.dicebear.com/7.x/notionists/svg?seed=Felix" alt="Avatar" data-v-5166eb9e></div><h1 class="brand-title" data-v-5166eb9e>YuCheng</h1><p class="brand-slogan" data-v-5166eb9e>è®°å½•ç¾Žå¥½çž¬é—´</p></div>',1)),t("nav",we,[x(c,{to:"/",class:E(["nav-item",{active:w(r).name==="home"}])},{default:C(()=>[...e[4]||(e[4]=[t("span",{class:"icon"},"ðŸ“·",-1),Y(" å…¨éƒ¨ç…§ç‰‡ ",-1)])]),_:1},8,["class"]),x(c,{to:"/albums",class:E(["nav-item",{active:w(r).name==="albums"}])},{default:C(()=>[...e[5]||(e[5]=[t("span",{class:"icon"},"ðŸ“‚",-1),Y(" ç›¸å†Œåˆ†ç±» ",-1)])]),_:1},8,["class"]),x(c,{to:"/timeline",class:E(["nav-item",{active:w(r).name==="timeline"}])},{default:C(()=>[...e[6]||(e[6]=[t("span",{class:"icon"},"â³",-1),Y(" æ—¶é—´å½’æ¡£ ",-1)])]),_:1},8,["class"])]),t("div",be,[t("div",ke,[e[7]||(e[7]=t("svg",{class:"search-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),W(t("input",{"onUpdate:modelValue":e[0]||(e[0]=m=>w(b).searchQuery=m),placeholder:"Type to search...",type:"text"},null,512),[[oe,w(b).searchQuery]])])])])],2),t("main",Le,[x(u,null,{default:C(({Component:m})=>[x(J,{name:"fade",mode:"out-in"},{default:C(()=>[(v(),I(se,{include:"GalleryPage,TimelinePage"},[(v(),I(ne(m)))],1024))]),_:2},1024)]),_:1})])])}}},xe=R(Ee,[["__scopeId","data-v-5166eb9e"]]),Ce=["data-date","aria-label"],$e={key:0,class:"skeleton-loader"},De=["src","alt"],Pe={class:"overlay"},Se={class:"overlay-content"},Ye={class:"photo-title"},Te={key:0,class:"exif-info"},Ae={key:0},Oe={class:"date"},Ie={__name:"PhotoCard",props:{photo:{type:Object,required:!0}},emits:["click","load"],setup(o,{emit:r}){const a=o,i=r,s=g(!1),l=g(null),e=()=>{s.value=!0,i("load",a.photo.id)},c=m=>j(m).format("YYYY.MM.DD"),u=m=>{(m.key==="Enter"||m.key===" ")&&i("click",a.photo.id)};return(m,L)=>(v(),h("div",{class:"photo-card","data-date":o.photo.date,onClick:L[0]||(L[0]=p=>m.$emit("click",o.photo.id)),tabindex:"0",role:"button","aria-label":`View photo: ${o.photo.name}`,onKeydown:u},[t("div",{class:E(["img-container",{loaded:s.value}])},[s.value?V("",!0):(v(),h("div",$e)),t("img",{ref_key:"imgRef",ref:l,src:o.photo.thumb||o.photo.url,loading:"lazy",alt:o.photo.name||"Photo",onLoad:e},null,40,De),t("div",Pe,[t("div",Se,[t("h3",Ye,k(o.photo.category),1),o.photo.exif?(v(),h("div",Te,[o.photo.exif.model?(v(),h("p",Ae,k(o.photo.exif.model),1)):V("",!0),t("p",Oe,k(c(o.photo.date)),1)])):V("",!0)])])],2)],40,Ce))}},Re=R(Ie,[["__scopeId","data-v-e135bed4"]]),Be={},Ve={class:"loading-spinner","aria-label":"Loading content"};function je(o,r){return v(),h("div",Ve,[...r[0]||(r[0]=[t("div",{class:"spinner"},null,-1)])])}const qe=R(Be,[["render",je],["__scopeId","data-v-4fca53d6"]]),ze={class:"gallery-container"},He={key:0,class:"gallery-header"},Ne={class:"header-content"},Fe={class:"category-title"},Me={class:"stats"},Qe={key:1,class:"search-feedback"},Ue={class:"masonry-wrapper"},Ge={key:1,class:"end-text"},S=20,Ke={__name:"Gallery",setup(o){const r=K(),a=de(),i={scrollY:0,category:"",limit:20},s=A(()=>b.photos||[]),l=g(r.params.name||"å…¨éƒ¨"),e=g(S),c=g(null);G(()=>r.params.name,d=>{const n=d||"å…¨éƒ¨";n!==i.category&&(l.value=n,e.value=S,i.category=n,i.scrollY=0,i.limit=S,window.scrollTo(0,0))});const u=A(()=>s.value.filter(n=>{var H;const f=l.value==="å…¨éƒ¨"?!0:n.category===l.value,y=b.searchQuery.toLowerCase(),T=!y||n.category.toLowerCase().includes(y)||((H=n.exif)==null?void 0:H.model)&&n.exif.model.toLowerCase().includes(y)||n.name.toLowerCase().includes(y)||n.date&&j(n.date).format("YYYY").includes(y);return f&&T}).sort((n,f)=>new Date(f.date)-new Date(n.date))),m=A(()=>u.value.slice(0,e.value)),L=()=>{e.value<u.value.length&&(e.value+=S)},p=d=>{},$=g(""),D=g(!1);let z=null;const B=()=>{D.value=!0;const d=document.querySelectorAll(".photo-card");for(const n of d){const f=n.getBoundingClientRect();if(f.top>=0&&f.top<window.innerHeight){const y=n.getAttribute("data-date");y&&($.value=j(y).format("YYYYå¹´ MMæœˆ"));break}}clearTimeout(z),z=setTimeout(()=>D.value=!1,1500)};ae(()=>{b.initData(),i.limit>S&&(e.value=i.limit);const d=new IntersectionObserver(n=>{n[0].isIntersecting&&L()},{rootMargin:"200px"});c.value&&d.observe(c.value),P(),window.addEventListener("resize",P)}),re(()=>{window.addEventListener("scroll",B,{passive:!0}),window.addEventListener("resize",P),i.scrollY>0&&ue(()=>{window.scrollTo(0,i.scrollY)})}),le(()=>{window.removeEventListener("scroll",B),window.removeEventListener("resize",P)}),ie(()=>{window.removeEventListener("scroll",B),window.removeEventListener("resize",P)}),ce((d,n,f)=>{i.scrollY=window.scrollY,i.limit=e.value,f()});const Z=d=>a.push(`/photo/${d}`),_=g(5),P=()=>{const d=window.innerWidth;d<600?_.value=1:d<900?_.value=2:d<1200?_.value=3:d<1600?_.value=4:_.value=5},X=A(()=>{const d=Array.from({length:_.value},()=>[]);return m.value.forEach((n,f)=>{d[f%_.value].push(n)}),d});return(d,n)=>(v(),h("div",ze,[x(J,{name:"fade"},{default:C(()=>[W(t("div",{class:"floating-date-badge"},k($.value),513),[[me,D.value&&$.value]])]),_:1}),w(b).searchQuery?(v(),h("div",Qe,[n[0]||(n[0]=Y('Searching for "',-1)),t("span",null,k(w(b).searchQuery),1),n[1]||(n[1]=Y('"',-1))])):(v(),h("header",He,[t("div",Ne,[t("h2",Fe,k(l.value),1),t("p",Me,k(u.value.length)+" Frames ",1)])])),t("div",Ue,[(v(!0),h(F,null,M(X.value,(f,y)=>(v(),h("div",{key:y,class:"masonry-column"},[(v(!0),h(F,null,M(f,T=>(v(),I(Re,{key:T.id,photo:T,onClick:Z,onLoad:p},null,8,["photo"]))),128))]))),128))]),t("div",{ref_key:"bottomObserver",ref:c,class:"loading-trigger"},[e.value<u.value.length?(v(),I(qe,{key:0})):(v(),h("span",Ge,"The End."))],512)]))}},U=R(Ke,[["__scopeId","data-v-91bdbe2c"]]),We=[{path:"/",name:"home",component:U},{path:"/category/:name",name:"category",component:U},{path:"/albums",name:"albums",component:()=>O(()=>import("./Albums-DtzzvsB6.js"),__vite__mapDeps([0,1,2,3]))},{path:"/timeline",name:"timeline",component:()=>O(()=>import("./Timeline-DNXrAX4H.js"),__vite__mapDeps([4,1,2,5]))},{path:"/photo/:id",name:"photo-detail",component:()=>O(()=>import("./PhotoDetail-Bs2CbgSX.js"),__vite__mapDeps([6,1,2,7]))}],Je=ve({history:he("/"),routes:We,scrollBehavior(o,r,a){return a||{top:0}}}),q=fe(xe);q.config.errorHandler=(o,r,a)=>{console.error("[System Error] Global Error Handler Caught:",o),console.error("[System Error] Info:",a)};window.addEventListener("unhandledrejection",o=>{console.warn("[System Warning] Unhandled Promise Rejection:",o.reason),o.preventDefault()});q.use(Je);q.mount("#app");export{R as _,O as a,b as s};
