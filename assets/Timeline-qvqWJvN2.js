import{p as r,q as f,m as g,c as i,b as o,t as y,F as d,B as u,z as b,o as l,x as m}from"./vendor-vue-BAWZmQqV.js";import{_ as k,s as p}from"./index-DuPt_TpW.js";const D={class:"timeline-container"},x={class:"date-header"},O={class:"date-text"},w={class:"count"},z={class:"day-grid"},B=["onClick"],C={class:"img-box"},U=["src","alt"],Y={key:0,class:"empty-state"},M={__name:"Timeline",setup(T){r.locale("zh-cn");const _=b();f(()=>{p.initData()});const h=t=>{if(!t)return"";if(t.includes("images.weserv.nl"))return t;let a=t;if(!t.startsWith("http"))return t;const n=a.replace(/^https?:\/\//,"");return`https://images.weserv.nl/?url=${encodeURIComponent(n)}&w=300&q=80&output=webp`},c=g(()=>{const t={};return[...p.photos||[]].sort((e,s)=>r(s.date).valueOf()-r(e.date).valueOf()).forEach(e=>{const s=r(e.date).format("YYYY年MM月DD日 dddd");t[s]||(t[s]={title:s,timestamp:r(e.date).valueOf(),photos:[]}),t[s].photos.push(e)}),Object.values(t).sort((e,s)=>s.timestamp-e.timestamp)}),v=t=>{_.push(`/photo/${t}`)};return(t,a)=>(l(),i("div",D,[a[1]||(a[1]=o("h2",null,"⏳ 时间归档",-1)),(l(!0),i(d,null,u(c.value,n=>(l(),i("div",{key:n.title,class:"time-section"},[o("div",x,[a[0]||(a[0]=o("span",{class:"icon-dot"},null,-1)),o("span",O,m(n.title),1),o("span",w,m(n.photos.length)+"张",1)]),o("div",z,[(l(!0),i(d,null,u(n.photos,e=>(l(),i("div",{key:e.id,class:"mini-card",onClick:s=>v(e.id)},[o("div",C,[o("img",{src:h(e.thumb||e.url),loading:"lazy",alt:e.title},null,8,U)])],8,B))),128))])]))),128)),c.value.length===0?(l(),i("div",Y," 暂无照片数据 ")):y("",!0)]))}},q=k(M,[["__scopeId","data-v-b446d9b9"]]);export{q as default};
