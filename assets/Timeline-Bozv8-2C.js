import{M as d,s as k,y as M,z as C,t as D,q as Z,a as I,c as l,b as s,D as _,F as g,B as w,C as B,n as x,E as z,o as i,A as y,G as P}from"./vendor-vue-CVeKuAsD.js";import{_ as O,s as f}from"./index-BuDO1wF7.js";const S={class:"timeline-container"},Y={class:"date-header"},E={class:"date-text"},G={class:"count"},T={class:"day-grid"},j=["onClick"],A={class:"img-box"},L=["src","alt"],W={key:0,class:"empty-state"},N=["src","alt"],H=Object.assign({name:"TimelinePage"},{__name:"Timeline",setup(R){d.locale("zh-cn"),z(),k(()=>{f.initData(),window.addEventListener("keydown",p)}),M(()=>{window.removeEventListener("keydown",p)});const u={scrollY:0};C((t,o,n)=>{u.scrollY=window.scrollY,n()}),D(()=>{u.scrollY>0&&P(()=>window.scrollTo(0,u.scrollY))});const v=Z(()=>{const t={};return[...f.photos||[]].sort((e,a)=>d(a.date).valueOf()-d(e.date).valueOf()).forEach(e=>{const a=d(e.date).format("YYYY年MM月DD日 dddd");t[a]||(t[a]={title:a,timestamp:d(e.date).valueOf(),photos:[]}),t[a].photos.push(e)}),Object.values(t).sort((e,a)=>a.timestamp-e.timestamp)}),c=I(!1),r=I(null),b=t=>{r.value=t,c.value=!0,document.body.style.overflow="hidden"},m=()=>{c.value=!1,document.body.style.overflow="auto"},p=t=>{t.key==="Escape"&&c.value&&m()},h=t=>{t.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuWbvueJh+WKoOi9veS4rTwvdGV4dD48L3N2Zz4="};return(t,o)=>(i(),l("div",S,[o[3]||(o[3]=s("h2",null,"⏳ 时间归档",-1)),(i(!0),l(g,null,w(v.value,n=>(i(),l("div",{key:n.title,class:"time-section"},[s("div",Y,[o[1]||(o[1]=s("span",{class:"icon-dot"},null,-1)),s("span",E,y(n.title),1),s("span",G,y(n.photos.length)+"张",1)]),s("div",T,[(i(!0),l(g,null,w(n.photos,e=>(i(),l("div",{key:e.id,class:"mini-card",onClick:a=>b(e)},[s("div",A,[s("img",{src:e.thumb||e.url,loading:"lazy",alt:e.name,onError:h},null,40,L)])],8,j))),128))])]))),128)),v.value.length===0?(i(),l("div",W," 暂无照片数据 ")):_("",!0),s("div",{class:x(["modal",{active:c.value}]),onClick:m},[s("div",{class:"modal-content",onClick:o[0]||(o[0]=B(()=>{},["stop"]))},[s("button",{class:"close-btn",onClick:m},[...o[2]||(o[2]=[s("svg",{class:"close-icon",viewBox:"0 0 24 24"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)])]),r.value?(i(),l("img",{key:0,src:r.value.url,alt:r.value.name,onError:h},null,40,N)):_("",!0)])],2)]))}}),F=O(H,[["__scopeId","data-v-688d2d7b"]]);export{F as default};
